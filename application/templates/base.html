<!DOCTYPE html>
<html lang="en">

<head>
  <!-- META -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- BOOTSTRAP CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />

  <!-- LOCAL CSS -->
  <link rel="stylesheet" href="/static/CSS/style.css" />

  <!-- ICON -->
  <link rel="icon" href="/static/img/icon.svg">

  <!-- FONT -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- CHARACTER COUNT -->
  <script>
    function countChar(val, max) {
      var len = val.value.length;

      if (len >= max) {
        $('#charNum').text('0 characters remaining');
      }
      else if (len == max - 1) {
        $('#charNum').text('1 character remaining');
      }
      else {
        $('#charNum').text(max - len + ' characters remaining');
      }
    };
  </script>

  <!-- TITLE -->
  {% if title %}
  <title>{{title}} - Paper Planes</title>
  {% else %}
  <title>Paper Planes</title>
  {% endif %}
  </title>
</head>

<header>
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-md navbar-dark nav-dark">

    <!-- TITLE -->
    <div class="container">
      <a class="navbar-brand mr-4 font-weight-bold" href="{{ url_for('routes.index') }}" id="nav-heading">
        Paper Planes
        <svg width="19" height="19" viewBox="0 0 6 6" xmlns="http://www.w3.org/2000/svg" class="ml-2">
          <path class="white-fill" fill-rule="evenodd" clip-rule="evenodd" d="M5.98657 0.257174C6.00021 0.2231 6.00355 0.185773 5.99618 0.14982C5.9888 0.113867 5.97104 0.080869 5.94508 0.0549169C5.91913 0.0289648 5.88614 0.0111999 5.85018 0.00382471C5.81423 -0.00355049 5.7769 -0.00021172 5.74283 0.0134271L0.287896 2.19552L0.118027 2.26302C0.0859245 2.27583 0.0579862 2.29726 0.0372982 2.32495C0.0166103 2.35263 0.00397777 2.3855 0.00079618 2.41992C-0.00238541 2.45433 0.00400771 2.48896 0.0192694 2.51997C0.034531 2.55098 0.0580672 2.57717 0.0872781 2.59564L0.241023 2.69314L0.241398 2.69389L2.11446 3.88563L3.30617 5.75873L3.30692 5.75948L3.40441 5.91323C3.42295 5.94233 3.44915 5.96575 3.48014 5.98091C3.51112 5.99608 3.54569 6.0024 3.58004 5.99918C3.61439 5.99596 3.64719 5.98333 3.67482 5.96268C3.70245 5.94202 3.72385 5.91414 3.73665 5.8821L5.98657 0.257174ZM5.29922 0.965915L5.47584 0.524171L5.03411 0.700793L2.22395 3.51101L2.3507 3.59163C2.37396 3.6064 2.39368 3.62612 2.40845 3.64938L2.48907 3.77613L5.29922 0.965915Z" fill="white" fill-opacity="0.85" />
        </svg>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggle" aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">

        <!-- NAVBAR COLLAPSE ICON (SMALL DEVICES ONLY) -->
        <!-- IF AUTHENTICATED USE PROFILE PHOTO AS ICON -->
        {% if current_user.is_authenticated %}
        <img class="rounded-circle mobile-icon" src="{{ url_for('static', filename='profile_pics/' + current_user.image_file) }}">

        <!-- ELSE USE HAMBURGER ICON -->
        {% else %}
        <span class="navbar-toggler-icon"></span>
        {% endif %}
      </button>

      <!-- LEFT SIDE -->
      <div class="collapse navbar-collapse" id="navbarToggle">
        <div class="navbar-nav mr-auto">

          <!-- IF AUTHENTICATED -->
          {% if current_user.is_authenticated %}

          <!-- LARGER DISPLAYS ONLY -->
          <a class="nav-item nav-link my-auto d-none d-md-block" href="{{ url_for('post.new_post') }}" style="color: var(--medium-emphasis);">Create post</a>

          <!-- SMALL DISPLAYS ONLY -->
          <div>
            <a class="dropdown-item d-md-none text-right pr-2" href="{{ url_for('post.new_post') }}">Create post</a>
            <a class="dropdown-item d-md-none text-right pr-2" href="{{ url_for('profile.profile') }}">View profile</a>
            <a class="dropdown-item d-md-none text-right pr-2" href="{{ url_for('authentication.logout') }}">Sign out</a>
          </div>
          {% endif %}
        </div>

        <!-- RIGHT SIDE (LARGER DEVICES ONLY) -->
        <div class="navbar-nav">
          {% if current_user.is_authenticated %}

          <!-- USERNAME & PROFILE SECTION -->
          <li class="nav-item dropdown d-none d-md-block">
            <a class="nav-link" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <span class="secondary-colour font-weight-bold">@{{current_user.username}}</span>
              <img class="rounded-circle profile-icon" src="{{ url_for('static', filename='profile_pics/' + current_user.image_file) }}">
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="{{ url_for('profile.profile') }}">View profile</a>
              <a class="dropdown-item" href="{{ url_for('authentication.logout') }}">Sign out</a>
            </div>
          </li>

          {% else %}

          <!-- LOG IN/SIGN UP OPTIONS -->
          <!-- LARGE SCREENS -->
          <a class="nav-item nav-link my-auto d-none d-md-block" href="{{ url_for('authentication.login') }}" style="color: var(--medium-emphasis);">Log in</a>
          <a class="nav-item nav-link my-auto d-none d-md-block" href="{{ url_for('authentication.register') }}"><button class="btn button btn-sm input-button">Sign up</button></a>

          <!-- SMALL SCREENS -->
          <div>
            <a class="dropdown-item my-auto d-md-none text-right pr-2" href="{{ url_for('authentication.login') }}">Log in</a>
            <a class="dropdown-item my-auto d-md-none text-right pr-2" href="{{ url_for('authentication.register') }}">Sign up</a>
          </div>
          {% endif %}
        </div>
      </div>

    </div>
  </nav>
</header>

<body>
  <main role=" main" class="container container-main">

    <!-- MAIN -->
    <div class="row">
      <div class="col-lg-8">

        <!-- FLASH MESSAGES -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-{{category}} alert-dismissible fade show" role="alert">
          {{message}}
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}

        <!-- CONTENT -->
        {% block content %}
        {% endblock %}
      </div>

      <!-- SIDEBAR -->
      <div class="col-lg-4">
        <div class="content-section">
          <div class="align-middle mt-1">
            <h5 class="heading-title">Trending</h5>
            <svg class="heading-svg" width="17" height="17" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g id="Graph">
                <path id="svg-graph" fill-rule="evenodd" clip-rule="evenodd" d="M0 0H1V15H16V16H0V0ZM10 3.5C10 3.36739 10.0527 3.24021 10.1464 3.14645C10.2402 3.05268 10.3674 3 10.5 3H14.5C14.6326 3 14.7598 3.05268 14.8536 3.14645C14.9473 3.24021 15 3.36739 15 3.5V7.5C15 7.63261 14.9473 7.75979 14.8536 7.85355C14.7598 7.94732 14.6326 8 14.5 8C14.3674 8 14.2402 7.94732 14.1464 7.85355C14.0527 7.75979 14 7.63261 14 7.5V4.9L10.387 9.317C10.3428 9.37099 10.2877 9.41511 10.2254 9.44655C10.1631 9.47798 10.0949 9.49602 10.0252 9.4995C9.9555 9.50299 9.88584 9.49184 9.8207 9.46678C9.75556 9.44172 9.69639 9.4033 9.647 9.354L7.06 6.767L3.404 11.794C3.32402 11.8957 3.20774 11.9624 3.07958 11.9802C2.95143 11.9979 2.82138 11.9653 2.71677 11.8892C2.61216 11.8131 2.54113 11.6994 2.51861 11.572C2.49609 11.4446 2.52383 11.3134 2.596 11.206L6.596 5.706C6.63846 5.64751 6.69309 5.59893 6.75613 5.56359C6.81917 5.52825 6.88912 5.50699 6.96117 5.50129C7.03322 5.49559 7.10564 5.50557 7.17346 5.53055C7.24128 5.55554 7.30287 5.59492 7.354 5.646L9.963 8.256L13.445 4H10.5C10.3674 4 10.2402 3.94732 10.1464 3.85355C10.0527 3.75979 10 3.63261 10 3.5Z" fill="#007BFF" />
              </g>
            </svg>
          </div>
          <ul class="list-group">

            <!-- LINK #1 -->
            <a href="#">
              <li class="sidebar-list d-flex justify-content-between align-items-center">
                #placeholder 1
                <span class="badge badge-pill badge-fill high-emphasis">14</span>
              </li>
            </a>

            <!-- LINK #2 -->
            <a href="#">
              <li class="sidebar-list d-flex justify-content-between align-items-center">
                #placeholder 2
                <span class="badge badge-pill badge-fill high-emphasis">2</span>
              </li>
            </a>

            <!-- LINK #3 -->
            <a href="#">
              <li class="sidebar-list d-flex justify-content-between align-items-center">
                #placeholder 3
                <span class="badge badge-pill badge-fill high-emphasis">1</span>
              </li>
            </a>

          </ul>
          </p>
        </div>
      </div>

    </div>
  </main>
</body>

<!-- SCRIPTS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

</html>